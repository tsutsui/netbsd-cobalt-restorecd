Typical 'restorecd' script invocation:

0. fetch and extract newer restorecd-*.tar.gz

% ftp http://www.ceres.dti.ne.jp/~tsutsui/netbsd/restorecd-20080912.tar.gz
    (or from appropriate server)
% tar zxf restorecd-20080912.tar.gz
% cd restorecd

  Then just type "make", or try the following procedure:

1. fetch NetBSD binaries and sources (for i386 and cobalt) into download dir
   (use appropriate mirrors)

 Check daily snapshot status:
  http://releng.NetBSD.org/cgi-bin/builds.cgi
 and specify appropriate date directory.

with rsync:
% rsync -va --files-from=restorecd-fetch.lst \
    rsync://rsync.NetBSD.org/NetBSD-daily/HEAD/20080910002Z download

with wget:
% (cd download ; \
  wget --base=ftp://ftp.NetBSD.org/pub/NetBSD-daily/HEAD/200809100002Z/ \
  --no-host-directories --cut-dirs=3 --timestamping --force-directories \
  --input-file=../restorecd-fetch.lst)

  (NOTE adjuct --cut-dirs=N by which directory you'll get files)

2. extract NetBSD sources

% tar zxpf download/source/sets/gnusrc.tgz
% tar zxpf download/source/sets/sharesrc.tgz
% tar zxpf download/source/sets/src.tgz
% tar zxpf download/source/sets/syssrc.tgz

2a. rebuild paneld(8)

2a-(1) prepare build environment to make cobalt binaries

% (cd usr/src; \
   sh build.sh -m cobalt -u -U -T tooldir.cobalt -D destdir.cobalt \
   -V OBJMACHINE=1 tools)

   NOTE1: check your TOOLDIR in the build log here.
   NOTE2: make sure /etc/mk.conf not to override $TOOLDIR

% (cd usr/src; \
   tooldir.cobalt/bin/nbmake-cobalt do-distrib-dirs)
% (cd usr/src/destdir.cobalt; \
    tar zxpf ../../../download/cobalt/binary/sets/base.tgz)
% (cd usr/src/destdir.cobalt; \
    tar zxpf ../../../download/cobalt/binary/sets/comp.tgz)

2a-(2) build paneld(8) binaries

% tar zxf patch/paneld.tar.gz
% patch -d paneltools -p < download/paneld_banner_refresh.diff
% patch -p < patch/paneld-20080912.diff

% (cd paneltools/paneld && \
   ../../usr/src/tooldir.cobalt/bin/nbmake-cobalt OBJMACHINE=1 obj && \
   ../../usr/src/tooldir.cobalt/bin/nbmake-cobalt dependall)
% usr/src/tooldir.cobalt/bin/mipsel--netbsd-install -c -r -m 555 \
   paneltools/paneld/obj.cobalt/paneld data/cobalt/install/files/usr/sbin
% usr/src/tooldir.cobalt/bin/mipsel--netbsd-install -c -r -m 444 \
   paneltools/paneld/paneld.conf.5 \
   data/cobalt/install/files/usr/share/man/man5
% mkdir -p data/cobalt/install/files/usr/share/man/cat5
% usr/src/tooldir.cobalt/bin/mipsel--netbsd-install -c -r -m 444 \
   paneltools/paneld/obj.cobalt/paneld.conf.cat5 \
   data/cobalt/install/files/usr/share/man/cat5/paneld.conf.0
% usr/src/tooldir.cobalt/bin/mipsel--netbsd-install -c -r -m 444 \
   paneltools/paneld/paneld.8 \
   data/cobalt/install/files/usr/share/man/man8
% mkdir -p data/cobalt/install/files/usr/share/man/cat8
% usr/src/tooldir.cobalt/bin/mipsel--netbsd-install -c -r -m 444 \
   paneltools/paneld/obj.cobalt/paneld.cat8 \
   data/cobalt/install/files/usr/share/man/cat8/paneld.0

3. build tools to build i386 server's kernel and boot image

% (cd usr/src; sh build.sh -m i386 -u -U -T tooldir.i386 -V OBJMACHINE=1 tools)

   NOTE1: check your TOOLDIR in the build log here.
   NOTE2: make sure /etc/mk.conf not to override $TOOLDIR

4. execute restorecd script

% sh restorecd server=`pwd`/download \
               client=`pwd`/download \
               source=`pwd`/usr/src  \
               tooldir=`pwd`/usr/src/tooldir.i386 -v

   NOTE1: use absolute paths to extracted restorecd dir (otherwise it fails)
   NOTE2: use your TOOLDIR for tooldir= arg if it isn't .../usr/src/tooldir.i386 
  Now you have an iso image in cd.tmp dir
